<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design System — Mia</title>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif&family=DM+Mono&family=Noto+Serif+SC&family=Cormorant+Garamond&family=Inter:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Default tokens - will be overridden by JS */
            --coral: #E8A87C;
            --coral-dark: #D99A6E;
            --coral-light: #F4C2A1;
            --cream: #FDF8F3;
            --cream-dark: #F5EDE4;
            --brown: #3D3229;
            --brown-light: #6B5E55;
            --warm-gray: #C4BBB5;
            --warm-border: #E8E3DE;
            
            --font-heading: 'Instrument Serif', serif;
            --font-body: 'DM Mono', monospace;
            --font-chinese: 'Noto Serif SC', serif;
            
            --radius-sm: 12px;
            --radius-md: 16px;
            --radius-lg: 20px;
            --radius-xl: 30px;
            
            --shadow-sm: 0 2px 8px rgba(61, 50, 41, 0.04);
            --shadow-md: 0 4px 20px rgba(61, 50, 41, 0.08);
            --shadow-lg: 0 12px 40px rgba(61, 50, 41, 0.15);
            
            --spacing-xs: 8px;
            --spacing-sm: 12px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: var(--font-body);
            background: #F5F5F5;
            color: var(--brown);
            line-height: 1.6;
        }

        .app {
            display: grid;
            grid-template-columns: 320px 1fr;
            height: 100vh;
        }

        /* Sidebar - Controls */
        .sidebar {
            background: white;
            border-right: 1px solid #E5E5E5;
            overflow-y: auto;
            padding: 24px;
        }

        .sidebar-header {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid #E5E5E5;
        }

        .sidebar-header h1 {
            font-family: var(--font-heading);
            font-size: 24px;
            margin-bottom: 8px;
        }

        .sidebar-header p {
            font-size: 13px;
            color: #888;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 16px;
            color: var(--coral-dark);
            text-decoration: none;
            font-size: 13px;
        }

        .control-section {
            margin-bottom: 32px;
        }

        .control-section h3 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #888;
            margin-bottom: 16px;
        }

        .control-group {
            margin-bottom: 16px;
        }

        .control-group label {
            display: block;
            font-size: 13px;
            margin-bottom: 6px;
            color: #555;
        }

        .control-group input[type="color"] {
            width: 100%;
            height: 40px;
            border: 1px solid #E5E5E5;
            border-radius: 8px;
            cursor: pointer;
        }

        .control-group input[type="range"] {
            width: 100%;
        }

        .control-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #E5E5E5;
            border-radius: 8px;
            font-size: 13px;
            background: white;
        }

        .value-display {
            font-size: 11px;
            color: #888;
            text-align: right;
        }

        .btn {
            padding: 10px 20px;
            border-radius: var(--radius-xl);
            border: 1px solid var(--warm-border);
            background: white;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .btn:hover {
            background: var(--cream-dark);
        }

        .btn-primary {
            background: var(--brown);
            color: white;
            border-color: var(--brown);
        }

        .btn-primary:hover {
            background: var(--brown-light);
        }

        .btn-export {
            width: 100%;
            margin-top: 8px;
        }

        /* Preview Area */
        .preview {
            background: var(--cream);
            overflow-y: auto;
            padding: 48px;
        }

        .preview-container {
            max-width: 960px;
            margin: 0 auto;
        }

        .preview-header {
            margin-bottom: 48px;
        }

        .preview-header h2 {
            font-family: var(--font-heading);
            font-size: 32px;
            margin-bottom: 8px;
        }

        .preview-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
        }

        .preview-section h3 {
            font-family: var(--font-heading);
            font-size: 20px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--warm-border);
        }

        /* Component Previews */
        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 16px;
        }

        .color-swatch {
            text-align: center;
        }

        .color-box {
            height: 80px;
            border-radius: var(--radius-md);
            margin-bottom: 8px;
            box-shadow: var(--shadow-sm);
        }

        .color-label {
            font-size: 11px;
            color: #888;
        }

        .typography-demo h1 {
            font-family: var(--font-heading);
            font-size: 48px;
            margin-bottom: 16px;
        }

        .typography-demo p {
            font-family: var(--font-body);
            font-size: 15px;
            color: var(--brown-light);
            line-height: 1.8;
        }

        .button-grid {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
        }

        .demo-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-md);
            border-left: 3px solid var(--coral);
            transition: all 0.3s;
        }

        .demo-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .demo-card h4 {
            font-family: var(--font-heading);
            font-size: 18px;
            margin-bottom: 8px;
        }

        .demo-card p {
            font-size: 13px;
            color: var(--brown-light);
        }

        .spacing-demo {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .spacing-box {
            background: var(--coral-light);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--brown);
        }

        .code-export {
            background: #2D2D2D;
            color: #E5E5E5;
            padding: 24px;
            border-radius: var(--radius-md);
            font-family: 'DM Mono', monospace;
            font-size: 13px;
            line-height: 1.8;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }

        @media (max-width: 900px) {
            .app {
                grid-template-columns: 1fr;
            }
            .sidebar {
                border-right: none;
                border-bottom: 1px solid #E5E5E5;
                max-height: 40vh;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar Controls -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="back-link">← Back to Hub</a>
                <h1>Design System</h1>
                <p>Configure and preview all visual tokens</p>
            </div>

            <div class="control-section">
                <h3>Colors</h3>
                
                <div class="control-group">
                    <label>Coral</label>
                    <input type="color" id="coral" value="#E8A87C">
                </div>
                
                <div class="control-group">
                    <label>Cream Background</label>
                    <input type="color" id="cream" value="#FDF8F3">
                </div>
                
                <div class="control-group">
                    <label>Text Primary</label>
                    <input type="color" id="brown" value="#3D3229">
                </div>
                
                <div class="control-group">
                    <label>Text Secondary</label>
                    <input type="color" id="brownLight" value="#6B5E55">
                </div>
            </div>

            <div class="control-section">
                <h3>Typography</h3>
                
                <div class="control-group">
                    <label>Heading Font</label>
                    <select id="fontHeading">
                        <option value="'Instrument Serif', serif">Instrument Serif</option>
                        <option value="'Cormorant Garamond', serif">Cormorant Garamond</option>
                        <option value="'DM Mono', monospace">DM Mono</option>
                        <option value="'Inter', sans-serif">Inter</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>Body Font</label>
                    <select id="fontBody">
                        <option value="'DM Mono', monospace">DM Mono</option>
                        <option value="'Inter', sans-serif">Inter</option>
                        <option value="'Instrument Serif', serif">Instrument Serif</option>
                        <option value="'Cormorant Garamond', serif">Cormorant Garamond</option>
                    </select>
                </div>
            </div>

            <div class="control-section">
                <h3>Border Radius</h3>
                
                <div class="control-group">
                    <label>Small <span class="value-display" id="radiusSmVal">12px</span></label>
                    <input type="range" id="radiusSm" min="0" max="32" value="12">
                </div>
                
                <div class="control-group">
                    <label>Medium <span class="value-display" id="radiusMdVal">16px</span></label>
                    <input type="range" id="radiusMd" min="0" max="48" value="16">
                </div>
                
                <div class="control-group">
                    <label>Large <span class="value-display" id="radiusLgVal">20px</span></label>
                    <input type="range" id="radiusLg" min="0" max="64" value="20">
                </div>
            </div>

            <div class="control-section">
                <h3>Shadows</h3>
                
                <div class="control-group">
                    <label>Shadow Opacity <span class="value-display" id="shadowVal">8%</span></label>
                    <input type="range" id="shadowOpacity" min="0" max="50" value="8">
                </div>
            </div>

            <div class="control-section">
                <button class="btn btn-primary btn-export" onclick="applyToAllPages()">Apply to All Pages</button>
                <button class="btn btn-export" onclick="exportCSS()">Export CSS</button>
                <button class="btn btn-export" onclick="resetDefaults()">Reset to Default</button>
            </div>
        </aside>

        <!-- Preview Area -->
        <main class="preview" id="previewArea">
            <div class="preview-container">
                <div class="preview-header">
                    <h2>Preview</h2>
                    <p style="color: var(--brown-light);">See how your design tokens look in real components</p>
                </div>

                <div class="preview-section">
                    <h3>Color Palette</h3>
                    <div class="color-grid">
                        <div class="color-swatch">
                            <div class="color-box" style="background: var(--coral);"></div>
                            <div class="color-label">Coral</div>
                        </div>
                        <div class="color-swatch">
                            <div class="color-box" style="background: var(--coral-dark);"></div>
                            <div class="color-label">Coral Dark</div>
                        </div>
                        <div class="color-swatch">
                            <div class="color-box" style="background: var(--coral-light);"></div>
                            <div class="color-label">Coral Light</div>
                        </div>
                        <div class="color-swatch">
                            <div class="color-box" style="background: var(--cream); border: 1px solid #E5E5E5;"></div>
                            <div class="color-label">Cream</div>
                        </div>
                        <div class="color-swatch">
                            <div class="color-box" style="background: var(--brown);"></div>
                            <div class="color-label">Brown</div>
                        </div>
                        <div class="color-swatch">
                            <div class="color-box" style="background: var(--brown-light);"></div>
                            <div class="color-label">Brown Light</div>
                        </div>
                    </div>
                </div>

                <div class="preview-section typography-demo">
                    <h3>Typography</h3>
                    <h1>Heading Style</h1>
                    <p>This is how body text looks. The quick brown fox jumps over the lazy dog. Typography creates hierarchy and rhythm in your design.</p>
                </div>

                <div class="preview-section">
                    <h3>Buttons</h3>
                    <div class="button-grid">
                        <button class="btn">Default Button</button>
                        <button class="btn btn-primary">Primary Button</button>
                        <button class="btn" style="background: var(--coral); color: white; border-color: var(--coral);">Coral Button</button>
                    </div>
                </div>

                <div class="preview-section">
                    <h3>Cards</h3>
                    <div class="card-grid">
                        <div class="demo-card">
                            <h4>Card Title</h4>
                            <p>This is a sample card component with your design tokens applied.</p>
                        </div>
                        <div class="demo-card">
                            <h4>Another Card</h4>
                            <p>Cards use border radius, shadows, and spacing from your system.</p>
                        </div>
                    </div>
                </div>

                <div class="preview-section">
                    <h3>Spacing Scale</h3>
                    <div class="spacing-demo">
                        <div class="spacing-box" style="height: 32px; width: 32px;">XS</div>
                        <div class="spacing-box" style="height: 48px; width: 48px;">SM</div>
                        <div class="spacing-box" style="height: 64px; width: 64px;">MD</div>
                        <div class="spacing-box" style="height: 96px; width: 96px;">LG</div>
                    </div>
                </div>

                <div class="preview-section" id="exportSection" style="display: none;">
                    <h3>Exported CSS</h3>
                    <pre class="code-export" id="cssOutput"></pre>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Get all control elements
        const controls = {
            coral: document.getElementById('coral'),
            cream: document.getElementById('cream'),
            brown: document.getElementById('brown'),
            brownLight: document.getElementById('brownLight'),
            fontHeading: document.getElementById('fontHeading'),
            fontBody: document.getElementById('fontBody'),
            radiusSm: document.getElementById('radiusSm'),
            radiusMd: document.getElementById('radiusMd'),
            radiusLg: document.getElementById('radiusLg'),
            shadowOpacity: document.getElementById('shadowOpacity')
        };

        // Update CSS variables when controls change
        function updateTokens() {
            const root = document.documentElement;
            
            // Colors
            root.style.setProperty('--coral', controls.coral.value);
            root.style.setProperty('--cream', controls.cream.value);
            root.style.setProperty('--brown', controls.brown.value);
            root.style.setProperty('--brown-light', controls.brownLight.value);
            
            // Generate derived colors
            root.style.setProperty('--coral-dark', adjustBrightness(controls.coral.value, -20));
            root.style.setProperty('--coral-light', adjustBrightness(controls.coral.value, 20));
            
            // Typography
            root.style.setProperty('--font-heading', controls.fontHeading.value);
            root.style.setProperty('--font-body', controls.fontBody.value);
            
            // Border radius
            root.style.setProperty('--radius-sm', controls.radiusSm.value + 'px');
            root.style.setProperty('--radius-md', controls.radiusMd.value + 'px');
            root.style.setProperty('--radius-lg', controls.radiusLg.value + 'px');
            root.style.setProperty('--radius-xl', (parseInt(controls.radiusLg.value) + 10) + 'px');
            
            // Shadows
            const opacity = controls.shadowOpacity.value;
            root.style.setProperty('--shadow-sm', `0 2px 8px rgba(61, 50, 41, 0.${opacity.padStart(2, '0')})`);
            root.style.setProperty('--shadow-md', `0 4px 20px rgba(61, 50, 41, 0.${(parseInt(opacity) * 1.5).toFixed(0).padStart(2, '0')})`);
            root.style.setProperty('--shadow-lg', `0 12px 40px rgba(61, 50, 41, 0.${(parseInt(opacity) * 2).toFixed(0).padStart(2, '0')})`);
            
            // Update value displays
            document.getElementById('radiusSmVal').textContent = controls.radiusSm.value + 'px';
            document.getElementById('radiusMdVal').textContent = controls.radiusMd.value + 'px';
            document.getElementById('radiusLgVal').textContent = controls.radiusLg.value + 'px';
            document.getElementById('shadowVal').textContent = controls.shadowOpacity.value + '%';
            
            // Save to localStorage
            saveTokens();
        }

        // Helper to adjust color brightness
        function adjustBrightness(hex, percent) {
            const num = parseInt(hex.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = Math.min(255, Math.max(0, (num >> 16) + amt));
            const G = Math.min(255, Math.max(0, (num >> 8 & 0x00FF) + amt));
            const B = Math.min(255, Math.max(0, (num & 0x0000FF) + amt));
            return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
        }

        // Save tokens to localStorage
        function saveTokens() {
            const tokens = {};
            for (const [key, element] of Object.entries(controls)) {
                tokens[key] = element.value;
            }
            localStorage.setItem('mia-design-tokens', JSON.stringify(tokens));
        }

        // Load tokens from localStorage
        function loadTokens() {
            const saved = localStorage.getItem('mia-design-tokens');
            if (saved) {
                const tokens = JSON.parse(saved);
                for (const [key, value] of Object.entries(tokens)) {
                    if (controls[key]) {
                        controls[key].value = value;
                    }
                }
                updateTokens();
            }
        }

        // Reset to defaults
        function resetDefaults() {
            controls.coral.value = '#E8A87C';
            controls.cream.value = '#FDF8F3';
            controls.brown.value = '#3D3229';
            controls.brownLight.value = '#6B5E55';
            controls.fontHeading.value = "'Instrument Serif', serif";
            controls.fontBody.value = "'DM Mono', monospace";
            controls.radiusSm.value = 12;
            controls.radiusMd.value = 16;
            controls.radiusLg.value = 20;
            controls.shadowOpacity.value = 8;
            updateTokens();
        }

        // Export CSS
        function exportCSS() {
            const root = document.documentElement;
            const css = `:root {
    /* Colors */
    --coral: ${controls.coral.value};
    --coral-dark: ${adjustBrightness(controls.coral.value, -20)};
    --coral-light: ${adjustBrightness(controls.coral.value, 20)};
    --cream: ${controls.cream.value};
    --brown: ${controls.brown.value};
    --brown-light: ${controls.brownLight.value};
    
    /* Typography */
    --font-heading: ${controls.fontHeading.value};
    --font-body: ${controls.fontBody.value};
    
    /* Border Radius */
    --radius-sm: ${controls.radiusSm.value}px;
    --radius-md: ${controls.radiusMd.value}px;
    --radius-lg: ${controls.radiusLg.value}px;
    --radius-xl: ${parseInt(controls.radiusLg.value) + 10}px;
    
    /* Shadows */
    --shadow-sm: 0 2px 8px rgba(61, 50, 41, 0.0${controls.shadowOpacity.value});
    --shadow-md: 0 4px 20px rgba(61, 50, 41, 0.${(parseInt(controls.shadowOpacity.value) * 1.5).toFixed(0).padStart(2, '0')});
    --shadow-lg: 0 12px 40px rgba(61, 50, 41, 0.${(parseInt(controls.shadowOpacity.value) * 2).toFixed(0).padStart(2, '0')});
}`;
            
            document.getElementById('cssOutput').textContent = css;
            document.getElementById('exportSection').style.display = 'block';
            document.getElementById('exportSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Apply tokens to all pages via localStorage
        function applyToAllPages() {
            saveTokens();
            alert('Design tokens saved! They will be applied to all pages that support the design system.');
        }

        // Add event listeners
        for (const element of Object.values(controls)) {
            element.addEventListener('input', updateTokens);
        }

        // Load saved tokens on startup
        loadTokens();
    </script>
</body>
</html>
